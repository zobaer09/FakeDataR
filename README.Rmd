---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# FakeDataR

<!-- badges: start -->
[![R-CMD-check](https://github.com/zobaer09/FakeDataR/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/zobaer09/FakeDataR/actions/workflows/R-CMD-check.yaml)
[ðŸ“˜ Website](https://zobaer09.github.io/FakeDataR/) â€¢ [Articles](https://zobaer09.github.io/FakeDataR/articles/) â€¢ [Reference](https://zobaer09.github.io/FakeDataR/reference/)
<!-- badges: end -->

**FakeDataR** makes safe, synthetic standâ€‘ins for real datasets.  
It mirrors **types**, **factor levels**, **NA/blank rates**, and even handles **sensitive columns** (IDs, emails, phones) via *fake* or *drop* strategies. You can also generate fake tables from a **database schema** without reading any rows.

---

## Installation

```r
# install.packages("devtools")
devtools::install_github("zobaer09/FakeDataR")
```

## Quick start

Generate a fake dataset that matches the structure of a real one:

```{r quick-start}
library(FakeDataR)

fake_mtc <- generate_fake_data(mtcars, n = 200, seed = 1)
head(fake_mtc)
```

Validate that classes and basic patterns were preserved:

```{r quick-validate}
validate_fake(mtcars, fake_mtc)
```

Preserve factor levels & numeric ranges (example with `palmerpenguins`):

```{r penguins, message=FALSE, warning=FALSE}
if (requireNamespace("palmerpenguins", quietly = TRUE)) {
  peng <- na.omit(palmerpenguins::penguins[, c("species","island","bill_length_mm","sex")])
  fake_peng <- generate_fake_data(peng, n = 400, seed = 11, category_mode = "preserve")
  validate_fake(peng, fake_peng)
}
```

## Sensitive columns

Detect and handle PII by name. Use strategy `"fake"` (default) or `"drop"`:

```{r pii}
df <- data.frame(
  id    = 1:50,
  email = sprintf("user%03d@corp.com", 1:50),
  phone = sprintf("(415) 555-%04d", 1:50),
  spend = runif(50, 10, 500)
)

# Keep the columns but replace values with synthetic ones
fake_keep <- generate_fake_data(
  df, n = 80, seed = 12,
  sensitive_detect = TRUE, sensitive_strategy = "fake"
)
intersect(df$email, fake_keep$email)  # should be character(0)

# Drop sensitive columns entirely
fake_drop <- generate_fake_data(
  df, n = 80, seed = 13,
  sensitive_detect = TRUE, sensitive_strategy = "drop"
)
names(fake_drop)  # no id/email/phone
```

## From a database schema (no data read)

Create fake rows using only the schema (types, nullability, etc.). This works even when you cannot access the underlying data.

```{r db, eval=FALSE}
library(DBI); library(RSQLite)

con <- dbConnect(RSQLite::SQLite(), ":memory:")
dbExecute(con, "
  CREATE TABLE employees (
    id INTEGER,
    email TEXT,
    phone TEXT,
    is_active BOOLEAN,
    hired_at TIMESTAMP,
    salary NUMERIC,
    dept TEXT
  )
")

sch  <- schema_from_db(con, "employees")
fake <- generate_fake_from_schema(sch, n = 50, seed = 14)

str(fake$hired_at)  # POSIXct
dbDisconnect(con)
```

## Exporting

Write fake data to common formats (CSV, RDS, Parquet) and optionally produce an **LLM bundle** containing a schema and README.

```{r export, eval=FALSE}
# CSV / RDS
export_fake(fake_mtc, file.path(tempdir(), "fake_mtc.csv"))
export_fake(fake_mtc, file.path(tempdir(), "fake_mtc.rds"))

# Parquet (requires the 'arrow' package)
# install.packages("arrow")
export_fake(fake_mtc, file.path(tempdir(), "fake_mtc.parquet"))

# End-to-end bundle
b <- llm_bundle(
  mtcars, n = 200, seed = 10, level = "high",
  formats = c("csv","rds"),
  path = tempdir(), filename = "mtcars_fake",
  write_prompt = TRUE, zip = TRUE
)
b$zip_path
```

## Reproducibility

All generators respect `seed`. Given the same inputs and a fixed package version, results are reproducible:

```{r reproducibility}
a1 <- generate_fake_data(CO2, n = 123, seed = 42)
a2 <- generate_fake_data(CO2, n = 123, seed = 42)
identical(a1, a2)
```

## Learn more

- **Getting started** vignette: <https://zobaer09.github.io/FakeDataR/articles/getting-started.html>  
- **Database workflow** vignette: <https://zobaer09.github.io/FakeDataR/articles/database-workflow.html>  
- Full function **reference**: <https://zobaer09.github.io/FakeDataR/reference/>

---

## Contributing

Issues and pull requests are welcome! If you find a bug or have a feature request, please open an issue on GitHub.

## License

This package is distributed under the terms of the license included in the repository (see `LICENSE`).

